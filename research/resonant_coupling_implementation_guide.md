# 谐振耦合无线充电实现指南
## Resonant Inductive Coupling Implementation Guide

---

## 一、基本原理 (Basic Principle)

### 1.1 谐振耦合原理

```
发射端（Tx）                   接收端（Rx）
┌─────────────┐              ┌─────────────┐
│  发射线圈    │              │  接收线圈    │
│  L₁ + C₁    │ ←── 磁场 ──→ │  L₂ + C₂    │
│  谐振频率f₀  │              │  谐振频率f₀  │
└─────────────┘              └─────────────┘
```

**关键点**：
1. **两个线圈调谐到相同谐振频率** f₀
2. **磁场耦合**：发射线圈产生的交变磁场被接收线圈接收
3. **谐振放大**：在谐振频率下，功率传输效率最高

### 1.2 谐振频率公式

```
f₀ = 1 / (2π × √(L × C))
```

其中：
- **L** = 线圈电感（H）
- **C** = 谐振电容（F）
- **f₀** = 谐振频率（Hz）

---

## 二、系统架构

### 2.1 完整系统框图

```
发射端（桌面基站/鼠标垫）：
┌──────────────────────────────────────┐
│  AC/DC电源 → DC-DC转换 → 高频逆变器  │
│                     ↓                 │
│              补偿网络（LCC/S-S）      │
│                     ↓                 │
│              发射线圈 L₁              │
│              + 谐振电容 C₁            │
└──────────────────────────────────────┘
                ↓ 磁场耦合
┌──────────────────────────────────────┐
│  接收线圈 L₂ + 谐振电容 C₂           │
│           ↓                           │
│      整流电路（全桥/半桥）            │
│           ↓                           │
│      DC-DC稳压（可选）                │
│           ↓                           │
│      负载（鼠标/机器人）               │
└──────────────────────────────────────┘
```

### 2.2 补偿网络类型

**1. S-S补偿（Series-Series）** ⭐推荐用于大功率
```
发射端：     [线圈L₁] -- [电容C₁]
接收端：     [线圈L₂] -- [电容C₂]
```
- **优点**：电流大，适合大功率传输
- **缺点**：对距离敏感

**2. S-P补偿（Series-Parallel）**
```
发射端：     [线圈L₁] -- [电容C₁]
接收端：     [线圈L₂] || [电容C₂]
```
- **优点**：输出电压稳定
- **缺点**：效率略低

**3. LCC补偿** ⭐推荐用于高效率
```
发射端：     [电感Lf] -- [电容Cf] -- [线圈L₁] || [电容C₁]
接收端：     [线圈L₂] -- [电容C₂]
```
- **优点**：效率高，负载适应性强
- **缺点**：参数多，设计复杂

**4. LCL补偿**
```
发射端：     [电感Lf] -- [电容Cf] -- [线圈L₁] || [电容C₁]
接收端：     [电感Lr] -- [线圈L₂] || [电容C₂]
```
- **优点**：恒流输出
- **缺点**：最复杂

---

## 三、线圈设计

### 3.1 线圈参数计算

#### 3.1.1 电感计算

**圆形线圈电感**：
```
L = (μ₀ × N² × r²) / (2r + 2.3d)
```

**简化公式（平面螺旋线圈）**：
```
L ≈ μ₀ × N² × r × ln(8r/a) / 2
```

其中：
- **L** = 电感（H）
- **N** = 匝数
- **r** = 线圈平均半径（m）
- **a** = 导线半径（m）
- **d** = 线圈厚度（m）
- **μ₀** = 4π×10⁻⁷ H/m（真空磁导率）

#### 3.1.2 设计示例

**示例1：鼠标垫发射线圈（13.56 MHz）**

目标：
- 工作频率：f₀ = 13.56 MHz
- 线圈直径：D = 20 cm
- 电感目标：L₁ = 5 µH

**步骤1：计算谐振电容**
```
C₁ = 1 / (4π² × f₀² × L₁)
   = 1 / (4π² × (13.56×10⁶)² × 5×10⁻⁶)
   = 27.5 pF
```

**步骤2：确定匝数**
假设导线直径 1mm，线圈厚度 2mm：
```
L ≈ μ₀ × N² × r × ln(8r/a) / 2

5×10⁻⁶ ≈ 4π×10⁻⁷ × N² × 0.1 × ln(8×0.1/0.0005) / 2

求解：N ≈ 8 匝
```

**步骤3：验证**
- 实际制作后测量电感
- 调整匝数或间距微调

**示例2：机器人接收线圈（大功率）**

目标：
- 工作频率：f₀ = 85 kHz（Qi标准）
- 线圈直径：D = 30 cm
- 功率：100W
- 电感目标：L₂ = 50 µH

**步骤1：计算谐振电容**
```
C₂ = 1 / (4π² × f₀² × L₂)
   = 1 / (4π² × (85×10³)² × 50×10⁻⁶)
   = 70 nF
```

**步骤2：匝数设计**
使用多股Litz线（降低高频损耗），直径2mm：
```
L ≈ μ₀ × N² × r × ln(8r/a) / 2

50×10⁻⁶ ≈ 4π×10⁻⁷ × N² × 0.15 × ln(8×0.15/0.001) / 2

求解：N ≈ 12 匝
```

**步骤3：导线选择**
- **Litz线**：多股细线，降低高频损耗
- **线径**：根据电流选择（100W/12V ≈ 8A，选择线径>2mm²）

### 3.2 线圈制作方法

#### 方法1：PCB线圈（小功率，推荐）
```
优点：
✅ 精度高，一致性好
✅ 成本低（批量生产）
✅ 易于集成到PCB
✅ 薄型设计

缺点：
❌ 功率受限（受PCB厚度限制）
❌ 高频损耗稍高

适用：
- 鼠标垫发射线圈
- 鼠标接收线圈（小功率）
- 频率：100kHz - 10MHz
```

**设计参数**：
- **线宽**：0.5-2mm（根据电流）
- **线间距**：线宽的50-100%
- **层数**：1-4层（多层提高电感）
- **线厚**：1-2 oz（35-70 µm）

**工具**：
- PCB设计软件（Altium, KiCad）
- 电磁场仿真（COMSOL, HFSS）验证

#### 方法2：绕制线圈（大功率，推荐）
```
优点：
✅ 功率大（可粗线）
✅ 效率高（Litz线）
✅ 灵活设计

缺点：
❌ 成本高
❌ 一致性需要控制
❌ 体积大

适用：
- 机器人接收线圈（大功率）
- 桌面基站发射线圈
- 频率：20kHz - 200kHz
```

**材料选择**：
- **Litz线**：多股线，降低高频损耗
  - 示例：1000股×0.1mm = 线径约2mm
- **骨架**：PCB板、3D打印支架、或直接绕制
- **固定**：环氧树脂封装，提高机械强度

#### 方法3：3D打印线圈支架（中等功率）
```
优点：
✅ 精确控制形状
✅ 可复杂设计
✅ 一致性好

缺点：
❌ 需要3D打印设备
❌ 材料可能需要特殊处理
```

---

## 四、补偿网络设计

### 4.1 S-S补偿设计（推荐入门）

#### 设计步骤

**步骤1：确定谐振频率**
```
f₀ = 13.56 MHz（示例）
或
f₀ = 85 kHz（Qi标准，适合大功率）
```

**步骤2：测量线圈电感**
```
使用LCR表测量：
L₁ = ? µH（发射线圈）
L₂ = ? µH（接收线圈）
```

**步骤3：计算谐振电容**
```
C₁ = 1 / (4π² × f₀² × L₁)
C₂ = 1 / (4π² × f₀² × L₂)
```

**步骤4：选择电容**
- **类型**：C0G/NP0陶瓷电容（低损耗）
- **电压**：留50-100%余量
- **精度**：±5%或±10%

**示例计算**：
```
L₁ = 5 µH, f₀ = 13.56 MHz
C₁ = 1 / (4π² × (13.56×10⁶)² × 5×10⁻⁶)
   = 27.5 pF

选择：27 pF C0G电容，耐压100V
```

### 4.2 LCC补偿设计（推荐高效率）

**LCC补偿结构**：
```
发射端：
[Lf] -- [Cf] -- [L₁ || C₁]

接收端：
[L₂ || C₂]
```

**设计公式**：

**1. 补偿电感 Lf**
```
Lf = k × L₁
```
其中 k = 0.1-0.3（经验值，可优化）

**2. 补偿电容 Cf**
```
Cf = 1 / (4π² × f₀² × Lf)
```

**3. 谐振电容**
```
C₁ = (1 - k) / (4π² × f₀² × L₁)
```

**示例**：
```
L₁ = 5 µH
f₀ = 13.56 MHz
k = 0.2（选择）

Lf = 0.2 × 5 = 1 µH
Cf = 1 / (4π² × (13.56×10⁶)² × 1×10⁻⁶) = 137.5 pF
C₁ = (1-0.2) / (4π² × (13.56×10⁶)² × 5×10⁻⁶) = 22 pF
```

---

## 五、功率电路设计

### 5.1 发射端电路

#### 高频逆变器

**全桥逆变器**（推荐大功率）：
```
[DC+] -- [Q1] -- [Tx] -- [Q2] -- [DC-]
          |                    |
         [Q3] -- [Tx] -- [Q4]
          |                    |
        [DC-]                 [DC+]
```

**半桥逆变器**（适合小功率）：
```
[DC+] -- [Q1] -- [Tx] -- [C_bias] -- [DC-]
          |
         [Q2]
          |
        [DC-]
```

**开关频率**：
- 等于谐振频率 f₀
- 或略低于谐振频率（提高零电压开关ZVS概率）

**开关器件选择**：
- **MOSFET**：高频低功率损耗
  - 示例：IRF540（适合100W）
  - 示例：SiC MOSFET（适合500W+，更高效率）
- **驱动芯片**：IR2110, TC4427（MOSFET驱动）

**控制方法**：
- **固定频率**：直接驱动（简单）
- **变频控制**：根据负载调整频率（优化效率）

#### 电路设计示例

**100W发射端电路**：

```
输入：12V DC
功率：100W
频率：85 kHz

元器件：
- MOSFET：IRF540 × 4（全桥）
- 驱动芯片：IR2110 × 2
- 补偿电感：Lf = 10 µH
- 补偿电容：Cf = 350 nF
- 谐振电容：C₁ = 70 nF
- 发射线圈：L₁ = 50 µH

功率计算：
I_rms = P / V = 100W / 12V ≈ 8.3 A
选择MOSFET：IRF540（I_d > 20A，留余量）
```

### 5.2 接收端电路

#### 整流电路

**全桥整流**（推荐）：
```
[L₂] -- [D1] -- [+] -- [D2]
  |                   |
  |    -- [D3] -- [-] -- [D4]
  |                   |
  └-------------------┘
```

**半波整流**（简单，效率低）：
```
[L₂] -- [D] -- [+]
            |
           [-]
```

**二极管选择**：
- **肖特基二极管**：压降低（0.2-0.4V），适合低电压
- **SiC二极管**：高速，适合高频
- **示例**：MBR20200（20A, 200V肖特基）

#### 稳压电路（可选）

**线性稳压**（简单，效率低）：
```
整流输出 → LM7812 → 12V稳定输出
效率：约70-80%
```

**DC-DC转换**（推荐）：
```
整流输出 → Buck转换器 → 12V稳定输出
效率：>90%
芯片：LM2596, TPS63000
```

---

## 六、实现步骤（实战指南）

### 步骤1：需求分析

**明确参数**：
1. **功率需求**：P_out = ? W
2. **工作距离**：d = ? m
3. **工作频率**：f₀ = ? （推荐：85 kHz, 6.78 MHz, 13.56 MHz）
4. **输入电压**：V_in = ? V
5. **输出电压**：V_out = ? V

**示例（鼠标应用）**：
- P_out = 0.1 W
- d = 0.5 m
- f₀ = 13.56 MHz
- V_in = 12 V
- V_out = 5 V

**示例（机器人应用）**：
- P_out = 100 W
- d = 1 m
- f₀ = 85 kHz
- V_in = 24 V
- V_out = 24 V

### 步骤2：线圈设计

**2.1 确定线圈尺寸**
- 发射线圈：根据应用场景（鼠标垫：20cm，桌面基站：30-50cm）
- 接收线圈：根据设备尺寸（鼠标：5cm，机器人：20-30cm）

**2.2 计算或测量电感**
- **方法1**：使用公式计算（初值）
- **方法2**：制作后测量（精确）

**2.3 选择线圈类型**
- **PCB线圈**：小功率，批量生产
- **绕制线圈**：大功率，灵活设计

**2.4 制作线圈**
- PCB线圈：发给PCB厂制作
- 绕制线圈：手工或自动绕线机

### 步骤3：补偿网络设计

**3.1 选择补偿类型**
- **入门**：S-S补偿
- **进阶**：LCC补偿（效率更高）

**3.2 计算电容值**
```
C = 1 / (4π² × f₀² × L)
```

**3.3 选择电容**
- **类型**：C0G/NP0（高频低损耗）
- **电压**：留50-100%余量
- **精度**：±5-10%

### 步骤4：功率电路设计

**4.1 发射端**
- 高频逆变器（全桥/半桥）
- MOSFET选择（根据功率）
- 驱动电路

**4.2 接收端**
- 整流电路（全桥）
- 稳压电路（如需要）
- 滤波电路

**4.3 PCB设计**
- 布局：高频走线短，低阻抗
- 地平面：完整地平面
- 去耦：就近放置去耦电容

### 步骤5：测试与调试

**5.1 谐振频率测试**
- 使用网络分析仪或LCR表
- 测量实际谐振频率
- 微调电容，匹配目标频率

**5.2 功率测试**
- 空载测试：检查谐振
- 带载测试：测量功率和效率
- 不同距离测试：评估耦合系数

**5.3 效率优化**
- 调整补偿网络参数
- 优化线圈间距和位置
- 优化开关频率（接近谐振频率）

---

## 七、设计工具和资源

### 7.1 计算工具

**在线计算器**：
- 线圈电感计算器
- 谐振频率计算器

**MATLAB脚本**：
```matlab
% 计算谐振电容
f0 = 13.56e6;  % 频率 (Hz)
L = 5e-6;      % 电感 (H)
C = 1/(4*pi^2*f0^2*L);  % 电容 (F)
fprintf('谐振电容: %.2f pF\n', C*1e12);
```

### 7.2 仿真软件

**电路仿真**：
- **LTspice**：免费，适合电路设计
- **PSIM**：电力电子仿真

**电磁场仿真**：
- **COMSOL Multiphysics**：3D场仿真（推荐）
- **ANSYS HFSS**：高频电磁仿真
- **OpenEMS**：开源FDTD仿真

### 7.3 测试设备

**必需设备**：
- **LCR表**：测量电感和电容
- **示波器**：观察波形
- **功率计**：测量功率和效率
- **网络分析仪**（可选）：精确测量谐振频率

**自制工具**：
- **信号发生器** + **示波器**：测量谐振频率
- **功率测量**：电流表 + 电压表

---

## 八、实际设计案例

### 案例1：鼠标垫无线充电（100mW）

**参数**：
- 功率：0.1 W
- 距离：0-2 cm（接触/近场）
- 频率：13.56 MHz
- 发射线圈：直径20 cm，PCB线圈
- 接收线圈：直径6 cm，PCB线圈

**设计**：

**发射端**：
```
线圈：L₁ = 2 µH（PCB，8匝）
电容：C₁ = 27 pF（C0G，50V）
电源：5V USB
驱动：简单MOSFET开关，13.56 MHz
```

**接收端**：
```
线圈：L₂ = 1 µH（PCB，5匝）
电容：C₂ = 55 pF（C0G，50V）
整流：肖特基二极管全桥
稳压：LDO（5V输出）
```

**效率目标**：>70%（近距离）

---

### 案例2：机器人无线充电（100W）

**参数**：
- 功率：100 W
- 距离：1 m
- 频率：85 kHz（Qi标准）
- 发射线圈：直径50 cm，绕制线圈
- 接收线圈：直径30 cm，绕制线圈

**设计**：

**发射端**：
```
线圈：L₁ = 50 µH（Litz线，12匝，直径50cm）
补偿：LCC补偿
  - Lf = 10 µH
  - Cf = 350 nF
  - C₁ = 70 nF
逆变器：全桥逆变，85 kHz
MOSFET：SiC MOSFET（高效）
电源：24V DC，>200W
```

**接收端**：
```
线圈：L₂ = 30 µH（Litz线，10匝，直径30cm）
电容：C₂ = 117 nF
整流：SiC二极管全桥（高效）
稳压：Buck转换器，24V输出
```

**效率目标**：>45%（1米距离）

---

## 九、常见问题与解决

### 问题1：效率太低

**原因**：
- 谐振频率不匹配
- 耦合系数太低
- 补偿网络不合适

**解决**：
1. 精确测量和调整谐振频率
2. 优化线圈位置和间距
3. 尝试不同补偿网络（S-S → LCC）

### 问题2：功率传输不稳定

**原因**：
- 频率漂移
- 负载变化
- 距离变化

**解决**：
1. 使用锁相环（PLL）锁定频率
2. 实现动态频率调谐
3. 优化补偿网络（提高鲁棒性）

### 问题3：发热严重

**原因**：
- 线圈损耗（高频损耗）
- 开关损耗
- 整流损耗

**解决**：
1. 使用Litz线降低高频损耗
2. 使用SiC器件降低开关损耗
3. 优化散热设计

### 问题4：金属干扰

**原因**：
- 金属物体产生涡流
- 降低耦合系数

**解决**：
1. 金属检测（FOD - Foreign Object Detection）
2. 保持金属物体远离
3. 使用屏蔽（但会降低效率）

---

## 十、进阶优化

### 10.1 动态频率调谐

**目的**：根据距离和负载自动调整频率，维持最高效率

**方法**：
- 检测接收功率
- 扫描频率，找到最大功率点
- 调整驱动频率

### 10.2 多线圈阵列

**目的**：支持移动充电，覆盖更大区域

**方法**：
- 多个发射线圈
- 根据接收端位置激活相应线圈
- 通过磁场检测定位

### 10.3 双向功率传输

**目的**：支持能量回收（如机器人刹车）

**方法**：
- 接收端和发射端都配备逆变器
- 双向控制协议
- 功率方向检测

---

## 十一、总结

### 实施路径

**入门**：
1. S-S补偿（简单）
2. 小功率测试（1-10W）
3. 近距离（<10cm）

**进阶**：
1. LCC补偿（高效率）
2. 中功率（10-100W）
3. 中距离（10cm-1m）

**专业**：
1. 多线圈阵列
2. 大功率（100-500W）
3. 远距离（1-3m）
4. 动态频率调谐

### 关键成功因素

1. ✅ **精确的谐振频率匹配**
2. ✅ **合适的线圈设计**（大小、匝数、材料）
3. ✅ **高效的补偿网络**
4. ✅ **低损耗的功率器件**
5. ✅ **仔细的测试和优化**

### 推荐学习资源

1. **论文**：arXiv:2411.17505（109.7W @ 1m案例）
2. **标准**：Qi标准文档，AirFuel Alliance标准
3. **书籍**：《Wireless Power Transfer》相关教材
4. **仿真**：COMSOL案例库（有无线充电示例）

---

*文档创建日期：2025年*
*目的：提供谐振耦合无线充电的完整实现指南*

